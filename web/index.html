<head>
  <style> body { margin: 0; } </style>

  <script src="//unpkg.com/3d-force-graph"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--  <script src="../../dist/3d-force-graph.js"></script>-->
</head>

<body>

  <div id="3d-graph"></div>

  <script>
    const elem = document.getElementById('3d-graph');

    $.getJSON( "gen/pid_tid_map.json", function( pids_tid_map ) {
      
      for (let pid in pids_tid_map) {
        for (let tid of pids_tid_map[pid]) {

          let pin_tid = tid["pin_tid"]
          let os_tid = tid["os_tid"]

          const Graph = ForceGraph3D()(elem)
            .jsonUrl(
              "gen/pid" + pid.toString() +
              "_tid" + os_tid.toString() +
              "_ptid" + pin_tid.toString() +
              ".json")
            .linkDirectionalArrowLength(10)
            .linkDirectionalArrowRelPos(1)

          return; // For now just plot the 1st thread of the 1st process
        }
      }

    })

  </script>
</body>